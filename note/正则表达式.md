# 正则表达式

> 利用事先定义好的一些特定字符、及这些特定字符的组合，组成某种规则。查找匹配某些符合规则的字符串，正则表达式就是写这种规则的工具。

## 创建正则表达式

1. 字面量形式

   ```javascript
   var reg = /正则/[修饰符]
   ```

2. 利用构造函数

   ```javascript
   var reg = new RegExp(正则字符串[,修饰符])
   ```

   *规则在运行的时候才确定，选择构造函数的方式*

   ```javascript
   var k = 'ke' + 'tang';
   var reg = new RegExp(k);	//這里的k是变量
   ```

**修饰符**

|  参数  |  含义   |
| :--: | :---: |
|  i   | 忽略大小写 |
|  g   | 全局匹配  |
|  m   | 多行匹配  |



## 测试正则表达式

### test

**作用**
​    查看正则表达式与指定的字符串是否匹配

**语法**
​    RegExpObj.test(string)

**参数**
​    string用来与正则表达式匹配的字符串

**返回值**
​    匹配到返回true，否则为false

*注意： 当正则有全局搜索标识符，在使用test的时候，每调用一次test，那会记录匹配到的字符的位置，记录在正则对象lastIndex中。*如果遇到问题，可以re.lastIndex = 0;就会从头开始搜索。

### search

**语法**
​    string.search(string|regexObj)

**参数**
​    string|regexObj 字符串或正则表达式

**返回值**
​    匹配到的字符串首次出现的位置，没有则返回-1 number

*注意：search和indexOf在传入字符串的时候功能是一样的。search可以接收正则为参数，indexOf不可以*

### match

**作用**
​    检索指定字符串或正则表达式匹配的字符串
**语法**
​    string.match(string|regexObj)

**参数**
​    string|regexObj 字符串或正则表达式

**返回值**
​    把匹配到的字符串放在数组中，没有检索到返回null (返回一个数组对象)

*注意*：

参数为regexObj时，如果带有g修饰符，则为全局匹配，返回的是匹配到的字符串组成的数组；
如果不带g修饰符，则只会匹配一个字符串，并且数组会有index和input属性
​    index 搜索到的字符串出现的位置
​    input 就是要搜索的字符串

### replace

**作用**

替换掉匹配的字符串或正则表达式匹配到的内容

**语法**

string.replace(string|regexObj,string|function)

**参数**

第一个参数：字符串或正则表达式
第二个参数：字符串或函数
如果为函数，参数说明：
   -没有分组的情况下：
​	$0 检索到的字符串  
​	$1 检索到的字符串的位置
​	$2 要检索的字符串

   -分组的情况下：
​	$0 检索到的字符串
​	$1... 分别是第X子项
​	写完参数的话：
​	倒数第二个参数是完整匹配到的字符串的下标
​	倒数第一个是检索的字符串
​	多余的是undefined

*注意：*第二个参数为函数，则必须要有返回值，替换的内容为函数的返回值

**返回值**

替换后的新的字符串

## 获取控制

### 单个字符和数字

| 字符        | 说明                                       |
| --------- | ---------------------------------------- |
| .         | 匹配除换行符(\n)外的任意一个字符                       |
| [a-z0-9]  | 匹配括号中的字符集中的任意字符 [1234]->匹配1，2，3，4；[\u4e00-\u9fa5] 汉字的unicode编码范围区间 |
| [^a-z0-9] | 匹配任意不在括号中的字符集中的字符 ^写在[]前面表示非             |
| \d        | 匹配数字                                     |
| \D        | 匹配非数字，同\[^0-9]相同                         |
| \w        | 匹配字母和数字及_                                |
| \W        | 匹配非字母和数字及_                               |
| \s        | 匹配一个空格                                   |
| \S        | 匹配一个非空格                                  |



### 重复字符

| 字符     | 说明                    |
| ------ | --------------------- |
| x?     | 匹配0个或1个x              |
| x*     | 匹配0个或任意多个x            |
| x+     | 匹配1个或多个x              |
| (xyz)+ | 匹配至少一个(xyz)           |
| x{m,n} | 匹配最少m个、最多n个x {3,}3及以上 |



### 锚字符

| 字符   | 说明                             |
| ---- | ------------------------------ |
| ^    | 行首匹配                           |
| $    | 行尾匹配                           |
| \A   | 只有匹配字符串开始处                     |
| \b   | 匹配单词边界，词在[]内时无效                |
| \B   | 匹配非单词边界 \w的左边或右边不是一个\w就存在一个边界符 |
| \z   | 只匹配字符串结束处                      |
| \Z   | 匹配字符串结束处或行尾                    |
| \G   | 匹配当前搜索的开始位置                    |



### 分组与捕获

| 形式     | 字符                | 说明                    |
| ------ | ----------------- | --------------------- |
| 捕获某个子项 | \1 | 捕获第一个子项 |
| 捕获性分组  | /(\d+)([a-z])/;   | 所有的分组都捕获返回            |
| 非捕获性分组 | /(\d+)(?:[a-z])/; | 只要在不需要捕获返回的分组加上?:就可以了 |
| 嵌套分组   | /(a?(b?(c?)))/;   | 从外往内获取                |
| 前瞻捕获   | /goo(?=gle)/;     | /后面必须是gle才能返回goo      |
| 特殊字符捕获 | /\[/;             | 用\来转义正则里的特殊字符         |
| 多行匹配   | /^\d+/gm;         | 限定了首位匹配，开启m换行模式       |



### 贪婪与惰性

| 模式   | 说明               | 开启方式   |
| ---- | ---------------- | ------ |
| 贪婪模式 | 从开始一直匹配到结束的地方    | 默认     |
| 懒惰模式 | 从开始一旦找到符合的就不再往后找 | 在最后面加? |












**了解方法的过程**

1. 哪一个对象下的方法
2. 方法是做什么的
3. 参数
    个数
    类型
4. 返回值